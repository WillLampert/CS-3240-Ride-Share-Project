{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h1 class="text-center" style="padding-top:50px; padding-bottom:25px;">Search for Rides</h1>
    <!-- Search Ride list -->
    <div class="text-center">
      <form action="{% url 'index' %}" method="get">
        <!-- Search Bar -->
          <div class="container">
              <div class="row">
                  <div class="col-sm-8">
                      <div class="md-form mt-0">
                        <input name="search" class="form-control" type="text" placeholder="Search" aria-label="Search" style="margin-bottom:10px">
                      </div>
                  </div>
                  <div class="col-sm-4">
                    <!-- Search Select -->
                      <select class="browser-default custom-select" name="search_choice">
                        <option class="dropdown-item" value="destination">Search by Destination</option>
                        <option class="dropdown-item" value="origin">Search by Origin</option>
                      </select>
                  </div>
              </div>
              <div class="row">
                  <div class="col-sm-12">
                    <input type="submit" class="btn btn-success" value="Search" style="width: 50%; margin:10px; padding-left:50px; padding-right:50px;">
                  </div>
              </div>
          </div>
      </form>

    </div>

    <div class="text-center" style="padding-top:50px;">
      {% if ride_list %}
        <ul class="list-group">
          {% for Ride in ride_list %}
              <button type="button" class="list-group-item list-group-item-action">
                Going to {{Ride.destination}}, {{Ride.destination_state}} on {{Ride.departure_date}}
              </button>
              <div class="content" style="display: none; padding-top:20px; padding-bottom: 20px">
                This ride is leaving from {{Ride.origin}}, {{Ride.origin_state}}. There are currently {{Ride.seats_available}} seats available.
                  {% if Ride.seats_available > 0 %}
                <button type="button" class="btn btn-primary" name="joinRide"  onclick="location.href={% url 'join_ride' ride_id=Ride.id%}">Join Ride</button>
                  {% endif %}
              </div>
          {% endfor %}
        </ul>
      {% else %}
        <p>No rides are available.</p>
      {% endif %}
    </div>
</div>

  <script>
  var coll = document.getElementsByClassName("list-group-item list-group-item-action");
  var i;

  for (i = 0; i < coll.length; i++) {
    coll[i].addEventListener("click", function() {
      this.classList.toggle("active");
      var content = this.nextElementSibling;
      if (content.style.display === "block") {
        content.style.display = "none";
      } else {
        content.style.display = "block";
      }
    });
  }
  </script>
{% endblock %}


